2025-10-16 08:02:43 [INFO] Logging system initialized
2025-10-16 08:02:43 [INFO] Initializing database connections...
2025-10-16 08:02:43 [INFO] Created neo4j graph adapter
2025-10-16 08:02:43 [INFO] Registered graph database adapter: neo4j
2025-10-16 08:02:43 [INFO] Set active graph adapter to: neo4j
2025-10-16 08:02:45 [INFO] Successfully connected to Neo4j database
2025-10-16 08:02:55 [WARNING] Could not connect to remote Qdrant: [WinError 10061] No connection could be made because the target machine actively refused it. Falling back to in-memory instance.
2025-10-16 08:02:55 [INFO] Created qdrant vector adapter
2025-10-16 08:02:55 [INFO] Successfully connected Qdrant adapter to global client.
2025-10-16 08:04:04 [INFO] Environment variables loaded successfully
2025-10-16 08:05:51 [INFO] PDF saved to: E:\Projects\Multi_Agent\lyzr_challenge\data\1760582149_Rohith_Resume.pdf
2025-10-16 08:05:51 [INFO] Environment variables loaded successfully
2025-10-16 08:05:52 [INFO] PDF Parser initialized with LlamaParse
2025-10-16 08:06:00 [INFO] 🚀 Starting Lyzr RAG Pipeline
2025-10-16 08:06:00 [INFO] === Step 1: PDF Parsing ===
2025-10-16 08:06:00 [INFO] Parsing PDF: E:\Projects\Multi_Agent\lyzr_challenge\data\1760582149_Rohith_Resume.pdf
2025-10-16 08:06:10 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
2025-10-16 08:06:10 [INFO] Successfully parsed PDF into 2 documents
2025-10-16 08:06:10 [WARNING] Failed to track pipeline step with Opik: 'function' object does not support the context manager protocol
2025-10-16 08:06:10 [INFO] Extracted 2 nodes from 2 documents
2025-10-16 08:06:10 [INFO] Sample node structure: ['id_', 'text', 'metadata', 'embedding']
2025-10-16 08:06:10 [INFO] ✅ PDF parsing complete: 2 documents, 2 nodes
2025-10-16 08:06:10 [INFO] === Step 2: Contextual Retrieval ===
2025-10-16 08:06:10 [INFO] Processing chunk 1/2
2025-10-16 08:06:13 [INFO] Completed chunk 1: Panchangam Rohith is a skilled computer science pr...
2025-10-16 08:06:20 [INFO] Processing chunk 2/2
2025-10-16 08:06:21 [INFO] Completed chunk 2: Rohith Panchangam has achieved notable success in ...
2025-10-16 08:06:28 [INFO] Successfully contextualized 2 chunks
2025-10-16 08:06:28 [INFO] Contextualized chunks saved to contextualized_chunks.json
2025-10-16 08:06:28 [INFO] ✅ Contextualization complete: 2 chunks
2025-10-16 08:06:28 [INFO] === Step 3: Knowledge Graph Extraction ===
2025-10-16 08:06:28 [INFO] Processing chunk 1/2
2025-10-16 08:06:50 [INFO] Successfully extracted data from chunk 1
2025-10-16 08:06:57 [INFO] Processing chunk 2/2
2025-10-16 08:07:05 [INFO] Successfully extracted data from chunk 2
2025-10-16 08:07:12 [INFO] Completed processing 2 chunks
2025-10-16 08:07:12 [INFO] Generating embeddings for vector similarity search (Qdrant)...
2025-10-16 08:07:12 [WARNING] Failed to generate embeddings: 'CohereEmbeddings' object has no attribute 'embed_entities'. Continuing without vector embeddings.
2025-10-16 08:07:12 [INFO] Merged graph: 13 entities, 11 relationships
2025-10-16 08:07:12 [INFO] ✅ Knowledge graph complete: {'num_entities': 13, 'num_relationships': 11, 'entity_types': {'Person': 2, 'Project': 4, 'Education': 3, 'University': 1, 'Competition': 1, 'Internship': 1, 'Hackathon': 1}, 'relationship_types': {'PARTICIPATED_IN_EVENT': 1, 'COMPLETED_INTERNSHIP': 1, 'DEVELOPED': 4, 'ATTENDED': 3, 'RECEIVED_CERTIFICATE_FROM': 1, 'PARTICIPATED_IN': 1}, 'avg_degree': 1.6923076923076923, 'max_degree': 7, 'isolated_entities': 0}
2025-10-16 08:07:12 [INFO] === Step 4: Neo4j Population ===
2025-10-16 08:07:13 [INFO] Created unique constraint on Entity.name
2025-10-16 08:07:13 [INFO] Received notification from DBMS server: <GqlStatusObject gql_status='00NA0', status_description="note: successful completion - index or constraint already exists. The command 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' has no effect. The index or constraint specified by 'CONSTRAINT constraint_5adcbbfe FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' already exists.", position=None, raw_classification='SCHEMA', classification=<NotificationClassification.SCHEMA: 'SCHEMA'>, raw_severity='INFORMATION', severity=<NotificationSeverity.INFORMATION: 'INFORMATION'>, diagnostic_record={'_classification': 'SCHEMA', '_severity': 'INFORMATION', 'OPERATION': '', 'OPERATION_CODE': '0', 'CURRENT_SCHEMA': '/'}> for query: 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE e.name IS UNIQUE'
2025-10-16 08:07:13 [INFO] Adding 13 unique entities...
2025-10-16 08:07:14 [INFO] Adding 11 relationships...
2025-10-16 08:07:15 [INFO] Successfully populated Neo4j with knowledge graph
2025-10-16 08:07:15 [INFO] ✅ Neo4j population complete
2025-10-16 08:07:15 [INFO] === Step 5: Vector Store Population ===
2025-10-16 08:07:15 [INFO] Received 2 chunks for vector store population.
2025-10-16 08:07:15 [INFO] ✅ Chunk filtering complete: 2 valid chunks, 0 filtered out
2025-10-16 08:07:15 [INFO] Generating embeddings for 2 documents...
2025-10-16 08:07:16 [INFO] Attempting to upsert 2 points to Qdrant...
2025-10-16 08:07:16 [INFO] Qdrant collection 'RAG_Marketing' not found. Creating it...
2025-10-16 08:07:16 [INFO] Successfully created Qdrant collection: RAG_Marketing
2025-10-16 08:07:16 [INFO] ✅ Upsert operation completed for 2 points.
2025-10-16 08:07:17 [INFO] ✅ Verified: 2 vectors successfully stored in Qdrant!
2025-10-16 08:08:27 [ERROR] Failed to generate retrieval plan: Error code: 400 - {'error': {'message': 'The model `llama3-8b-8192` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}}
2025-10-16 08:08:33 [ERROR] Error generating answer: status_code: 404, body: {'id': 'd27cb2c4-c362-4357-9677-01eedf8828b0', 'message': "model 'command-r' was removed on September 15, 2025. See https://docs.cohere.com/docs/models#command for a list of models you can use instead."}
2025-10-16 08:08:34 [INFO] Generated Cypher Query: MATCH (n:Entity)
WHERE toLower(n.name) CONTAINS 'pdf'
OPTIONAL MATCH (n)-[r:SUMMARIZED_BY]-(m)
RETURN n.name AS name, n.type AS type, type(r) AS relation, m.name AS related_name, m.type AS related_type


This query searches for an entity with the label "Entity" where the name contains the term "pdf" (case-insensitive). It then looks for a relationship of type "SUMMARIZED_BY" between the PDF entity and another entity (m). The query returns the names and types of both entities, the type of the relationship, and the related entity's details.

However, if the graph does not have a specific relationship type for summarization, we might need to use a more general approach, such as looking for entities that are related to the PDF through other means (e.g., authorship, content, or usage). In that case, the query could be modified to include multiple relationship types or to use a more flexible matching pattern.
2025-10-16 08:08:34 [ERROR] Error executing Cypher query: {neo4j_code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 'This': expected ',', 'ORDER BY', 'CALL', 'CREATE', 'LOAD CSV', 'DELETE', 'DETACH', 'FINISH', 'FOREACH', 'INSERT', 'LIMIT', 'MATCH', 'MERGE', 'NODETACH', 'OFFSET', 'OPTIONAL', 'REMOVE', 'RETURN', 'SET', 'SKIP', 'UNION', 'UNWIND', 'USE', 'WITH' or <EOF> (line 7, column 1 (offset: 204))
"This query searches for an entity with the label "Entity" where the name contains the term "pdf" (case-insensitive). It then looks for a relationship of type "SUMMARIZED_BY" between the PDF entity and another entity (m). The query returns the names and types of both entities, the type of the relationship, and the related entity's details."
 ^} {gql_status: 42001} {gql_status_description: error: syntax error or access rule violation - invalid syntax}
2025-10-16 08:08:34 [ERROR] Error in graph query pipeline: {neo4j_code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 'This': expected ',', 'ORDER BY', 'CALL', 'CREATE', 'LOAD CSV', 'DELETE', 'DETACH', 'FINISH', 'FOREACH', 'INSERT', 'LIMIT', 'MATCH', 'MERGE', 'NODETACH', 'OFFSET', 'OPTIONAL', 'REMOVE', 'RETURN', 'SET', 'SKIP', 'UNION', 'UNWIND', 'USE', 'WITH' or <EOF> (line 7, column 1 (offset: 204))
"This query searches for an entity with the label "Entity" where the name contains the term "pdf" (case-insensitive). It then looks for a relationship of type "SUMMARIZED_BY" between the PDF entity and another entity (m). The query returns the names and types of both entities, the type of the relationship, and the related entity's details."
 ^} {gql_status: 42001} {gql_status_description: error: syntax error or access rule violation - invalid syntax}
2025-10-16 08:08:34 [INFO] Fused 2 result lists into 3 documents using RRF.
2025-10-16 08:08:34 [ERROR] Error synthesizing answers: Error code: 400 - {'error': {'message': 'The model `llama3-8b-8192` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}}
2025-10-16 08:23:22 [INFO] Shutting down database connections...
2025-10-16 08:23:22 [INFO] Disconnected from Neo4j database
2025-10-16 08:40:15 [INFO] Logging system initialized
2025-10-16 08:40:15 [INFO] Initializing database connections...
2025-10-16 08:40:15 [INFO] Created neo4j graph adapter
2025-10-16 08:40:15 [INFO] Registered graph database adapter: neo4j
2025-10-16 08:40:15 [INFO] Set active graph adapter to: neo4j
2025-10-16 08:40:16 [INFO] Successfully connected to Neo4j database
2025-10-16 08:40:27 [WARNING] Could not connect to remote Qdrant: [WinError 10061] No connection could be made because the target machine actively refused it. Falling back to in-memory instance.
2025-10-16 08:40:28 [INFO] Created qdrant vector adapter
2025-10-16 08:40:28 [INFO] Successfully connected Qdrant adapter to global client.
2025-10-16 09:12:04 [INFO] Logging system initialized
2025-10-16 09:12:04 [INFO] Initializing database connections...
2025-10-16 09:12:04 [INFO] Created neo4j graph adapter
2025-10-16 09:12:04 [INFO] Registered graph database adapter: neo4j
2025-10-16 09:12:04 [INFO] Set active graph adapter to: neo4j
2025-10-16 09:12:05 [INFO] Successfully connected to Neo4j database
2025-10-16 09:12:15 [WARNING] Could not connect to remote Qdrant: [WinError 10061] No connection could be made because the target machine actively refused it. Falling back to in-memory instance.
2025-10-16 09:12:15 [INFO] Created qdrant vector adapter
2025-10-16 09:12:15 [INFO] Successfully connected Qdrant adapter to global client.
2025-10-16 09:13:10 [INFO] Environment variables loaded successfully
2025-10-16 09:16:51 [INFO] PDF saved to: E:\Projects\Multi_Agent\lyzr_challenge\data\1760586410_Rohith_Resume.pdf
2025-10-16 09:16:51 [INFO] Environment variables loaded successfully
2025-10-16 09:16:51 [INFO] PDF Parser initialized with LlamaParse
2025-10-16 09:16:59 [INFO] 🚀 Starting Lyzr RAG Pipeline
2025-10-16 09:16:59 [INFO] === Step 1: PDF Parsing ===
2025-10-16 09:16:59 [INFO] Parsing PDF: E:\Projects\Multi_Agent\lyzr_challenge\data\1760586410_Rohith_Resume.pdf
2025-10-16 09:17:08 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
2025-10-16 09:17:08 [INFO] Successfully parsed PDF into 2 documents
2025-10-16 09:17:08 [WARNING] Failed to track pipeline step with Opik: 'function' object does not support the context manager protocol
2025-10-16 09:17:08 [INFO] Extracted 2 nodes from 2 documents
2025-10-16 09:17:08 [INFO] Sample node structure: ['id_', 'text', 'metadata', 'embedding']
2025-10-16 09:17:08 [INFO] ✅ PDF parsing complete: 2 documents, 2 nodes
2025-10-16 09:17:08 [INFO] === Step 2: Contextual Retrieval ===
2025-10-16 09:17:08 [INFO] Processing chunk 1/2
2025-10-16 09:17:10 [INFO] Completed chunk 1: Panchangam Rohith is a skilled computer science pr...
2025-10-16 09:17:17 [INFO] Processing chunk 2/2
2025-10-16 09:17:19 [INFO] Completed chunk 2: Rohith Panchangam has achieved notable success in ...
2025-10-16 09:17:26 [INFO] Successfully contextualized 2 chunks
2025-10-16 09:17:26 [INFO] Contextualized chunks saved to contextualized_chunks.json
2025-10-16 09:17:26 [INFO] ✅ Contextualization complete: 2 chunks
2025-10-16 09:17:26 [INFO] === Step 3: Knowledge Graph Extraction ===
2025-10-16 09:17:26 [INFO] Processing chunk 1/2
2025-10-16 09:17:38 [ERROR] Error extracting entities from text: status_code: 502, body: 
<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>502 Server Error</title>
</head>
<body text=#000000 bgcolor=#ffffff>
<h1>Error: Server Error</h1>
<h2>The server encountered a temporary error and could not complete your request.<p>Please try again in 30 seconds.</h2>
<h2></h2>
</body></html>

2025-10-16 09:17:38 [WARNING] Failed to extract data from chunk 1
2025-10-16 09:17:45 [INFO] Processing chunk 2/2
2025-10-16 09:17:53 [INFO] Successfully extracted data from chunk 2
2025-10-16 09:18:00 [INFO] Completed processing 1 chunks
2025-10-16 09:18:00 [INFO] Generating embeddings for vector similarity search (Qdrant)...
2025-10-16 09:18:01 [INFO] Generated embeddings for 5 entities and 4 relationships
2025-10-16 09:18:01 [INFO] Merged graph: 5 entities, 4 relationships
2025-10-16 09:18:01 [INFO] ✅ Knowledge graph complete: {'num_entities': 5, 'num_relationships': 4, 'entity_types': {'Person': 1, 'University': 1, 'Competition': 1, 'Internship': 1, 'Hackathon': 1}, 'relationship_types': {'RECEIVED_CERTIFICATE_FROM': 1, 'COMPLETED_INTERNSHIP': 1, 'PARTICIPATED_IN_EVENT': 1, 'PARTICIPATED_IN': 1}, 'avg_degree': 1.6, 'max_degree': 4, 'isolated_entities': 0}
2025-10-16 09:18:01 [INFO] === Step 4: Neo4j Population ===
2025-10-16 09:18:02 [INFO] Created unique constraint on Entity.name
2025-10-16 09:18:02 [INFO] Received notification from DBMS server: <GqlStatusObject gql_status='00NA0', status_description="note: successful completion - index or constraint already exists. The command 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' has no effect. The index or constraint specified by 'CONSTRAINT constraint_5adcbbfe FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' already exists.", position=None, raw_classification='SCHEMA', classification=<NotificationClassification.SCHEMA: 'SCHEMA'>, raw_severity='INFORMATION', severity=<NotificationSeverity.INFORMATION: 'INFORMATION'>, diagnostic_record={'_classification': 'SCHEMA', '_severity': 'INFORMATION', 'OPERATION': '', 'OPERATION_CODE': '0', 'CURRENT_SCHEMA': '/'}> for query: 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE e.name IS UNIQUE'
2025-10-16 09:18:02 [INFO] Adding 5 unique entities...
2025-10-16 09:18:02 [INFO] Adding 4 relationships...
2025-10-16 09:18:03 [INFO] Successfully populated Neo4j with knowledge graph
2025-10-16 09:18:03 [INFO] ✅ Neo4j population complete
2025-10-16 09:18:03 [INFO] === Step 5: Vector Store Population ===
2025-10-16 09:18:03 [INFO] Received 2 chunks for vector store population.
2025-10-16 09:18:03 [INFO] ✅ Chunk filtering complete: 2 valid chunks, 0 filtered out
2025-10-16 09:18:03 [INFO] Generating embeddings for 2 documents...
2025-10-16 09:18:03 [INFO] Attempting to upsert 2 points to Qdrant...
2025-10-16 09:18:03 [INFO] Qdrant collection 'RAG_Marketing' not found. Creating it...
2025-10-16 09:18:03 [INFO] Successfully created Qdrant collection: RAG_Marketing
2025-10-16 09:18:03 [ERROR] ❌ Vector store population failed: could not broadcast input array from shape (1536,) into shape (1024,)
Traceback (most recent call last):
  File "E:\Projects\Multi_Agent\lyzr_challenge\main.py", line 333, in populate_vector_store
    self.qdrant_client.upsert(
    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=settings.QDRANT_COLLECTION_NAME,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        points=points,
        ^^^^^^^^^^^^^^
        wait=True  # Wait for the operation to complete
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\qdrant_client.py", line 1633, in upsert
    return self._client.upsert(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\qdrant_local.py", line 777, in upsert
    collection.upsert(points)
    ~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 2301, in upsert
    self._upsert_point(point)
    ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 2293, in _upsert_point
    self._add_point(point)
    ~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 2201, in _add_point
    named_vectors[idx] = vector_np
    ~~~~~~~~~~~~~^^^^^
ValueError: could not broadcast input array from shape (1536,) into shape (1024,)
2025-10-16 09:19:14 [INFO] Shutting down database connections...
2025-10-16 09:19:14 [INFO] Disconnected from Neo4j database
2025-10-16 09:25:17 [INFO] Logging system initialized
2025-10-16 09:25:17 [INFO] Initializing database connections...
2025-10-16 09:25:17 [INFO] Created neo4j graph adapter
2025-10-16 09:25:17 [INFO] Registered graph database adapter: neo4j
2025-10-16 09:25:17 [INFO] Set active graph adapter to: neo4j
2025-10-16 09:25:18 [INFO] Successfully connected to Neo4j database
2025-10-16 09:25:28 [WARNING] Could not connect to remote Qdrant: [WinError 10061] No connection could be made because the target machine actively refused it. Falling back to in-memory instance.
2025-10-16 09:25:28 [INFO] Created qdrant vector adapter
2025-10-16 09:25:28 [INFO] Successfully connected Qdrant adapter to global client.
2025-10-16 09:25:28 [INFO] System initialized: {'python_version': '3.13.3 (tags/v3.13.3:6280bb5, Apr  8 2025, 14:47:33) [MSC v.1943 64 bit (AMD64)]', 'working_directory': 'E:\\Projects\\Multi_Agent\\lyzr_challenge', 'config': {'llm_model': 'openai/gpt-oss-20b', 'cohere_model': 'command-a-vision-07-2025', 'context_window_size': 2048, 'rate_limit_delay': 10}, 'timestamp': '2025-10-16T09:25:28.501519'}
2025-10-16 09:25:28 [INFO] PDF Parser initialized with LlamaParse
2025-10-16 09:25:35 [INFO] Shutting down database connections...
2025-10-16 09:25:35 [INFO] Disconnected from Neo4j database
2025-10-16 10:33:54 [INFO] Logging system initialized
2025-10-16 10:33:54 [INFO] Initializing database connections...
2025-10-16 10:33:54 [INFO] Created neo4j graph adapter
2025-10-16 10:33:54 [INFO] Registered graph database adapter: neo4j
2025-10-16 10:33:54 [INFO] Set active graph adapter to: neo4j
2025-10-16 10:33:55 [INFO] Successfully connected to Neo4j database
2025-10-16 10:34:05 [WARNING] Could not connect to remote Qdrant: [WinError 10061] No connection could be made because the target machine actively refused it. Falling back to in-memory instance.
2025-10-16 10:34:05 [INFO] Created qdrant vector adapter
2025-10-16 10:34:05 [INFO] Successfully connected Qdrant adapter to global client.
2025-10-16 10:34:53 [INFO] Environment variables loaded successfully
2025-10-16 10:47:09 [INFO] PDF saved to: E:\Projects\Multi_Agent\lyzr_challenge\data\1760591827_Rohith_Resume.pdf
2025-10-16 10:47:09 [INFO] Environment variables loaded successfully
2025-10-16 10:47:09 [INFO] PDF Parser initialized with LlamaParse
2025-10-16 10:47:17 [INFO] 🚀 Starting Lyzr RAG Pipeline
2025-10-16 10:47:17 [INFO] === Step 1: PDF Parsing ===
2025-10-16 10:47:17 [INFO] Parsing PDF: E:\Projects\Multi_Agent\lyzr_challenge\data\1760591827_Rohith_Resume.pdf
2025-10-16 10:47:34 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
2025-10-16 10:47:34 [INFO] Successfully parsed PDF into 2 documents
2025-10-16 10:47:34 [WARNING] Failed to track pipeline step with Opik: 'function' object does not support the context manager protocol
2025-10-16 10:47:34 [INFO] Extracted 2 nodes from 2 documents
2025-10-16 10:47:34 [INFO] Sample node structure: ['id_', 'text', 'metadata', 'embedding']
2025-10-16 10:47:34 [INFO] ✅ PDF parsing complete: 2 documents, 2 nodes
2025-10-16 10:47:34 [INFO] === Step 2: Contextual Retrieval ===
2025-10-16 10:47:34 [INFO] Processing chunk 1/2
2025-10-16 10:47:36 [INFO] Completed chunk 1: Panchangam Rohith is a skilled computer science pr...
2025-10-16 10:47:43 [INFO] Processing chunk 2/2
2025-10-16 10:47:45 [INFO] Completed chunk 2: Rohith Panchangam has achieved notable success in ...
2025-10-16 10:47:52 [INFO] Successfully contextualized 2 chunks
2025-10-16 10:47:52 [INFO] Contextualized chunks saved to contextualized_chunks.json
2025-10-16 10:47:52 [INFO] ✅ Contextualization complete: 2 chunks
2025-10-16 10:47:52 [INFO] === Step 3: Knowledge Graph Extraction ===
2025-10-16 10:47:52 [INFO] Processing chunk 1/2
2025-10-16 10:48:17 [INFO] Successfully extracted data from chunk 1
2025-10-16 10:48:24 [INFO] Processing chunk 2/2
2025-10-16 10:48:33 [INFO] Successfully extracted data from chunk 2
2025-10-16 10:48:40 [INFO] Completed processing 2 chunks
2025-10-16 10:48:40 [INFO] Generating embeddings for vector similarity search (Qdrant)...
2025-10-16 10:48:42 [INFO] Generated embeddings for 13 entities and 11 relationships
2025-10-16 10:48:42 [INFO] Merged graph: 13 entities, 11 relationships
2025-10-16 10:48:42 [INFO] ✅ Knowledge graph complete: {'num_entities': 13, 'num_relationships': 11, 'entity_types': {'Person': 2, 'Project': 4, 'Education': 3, 'University': 1, 'Competition': 1, 'Internship': 1, 'Hackathon': 1}, 'relationship_types': {'RECEIVED_CERTIFICATE_FROM': 1, 'ATTENDED': 3, 'DEVELOPED': 4, 'PARTICIPATED_IN_EVENT': 1, 'PARTICIPATED_IN': 1, 'COMPLETED_INTERNSHIP': 1}, 'avg_degree': 1.6923076923076923, 'max_degree': 7, 'isolated_entities': 0}
2025-10-16 10:48:42 [INFO] === Step 4: Neo4j Population ===
2025-10-16 10:48:43 [INFO] Created unique constraint on Entity.name
2025-10-16 10:48:43 [INFO] Received notification from DBMS server: <GqlStatusObject gql_status='00NA0', status_description="note: successful completion - index or constraint already exists. The command 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' has no effect. The index or constraint specified by 'CONSTRAINT constraint_5adcbbfe FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' already exists.", position=None, raw_classification='SCHEMA', classification=<NotificationClassification.SCHEMA: 'SCHEMA'>, raw_severity='INFORMATION', severity=<NotificationSeverity.INFORMATION: 'INFORMATION'>, diagnostic_record={'_classification': 'SCHEMA', '_severity': 'INFORMATION', 'OPERATION': '', 'OPERATION_CODE': '0', 'CURRENT_SCHEMA': '/'}> for query: 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE e.name IS UNIQUE'
2025-10-16 10:48:43 [INFO] Adding 13 unique entities...
2025-10-16 10:48:43 [INFO] Adding 11 relationships...
2025-10-16 10:48:44 [INFO] Successfully populated Neo4j with knowledge graph
2025-10-16 10:48:44 [INFO] ✅ Neo4j population complete
2025-10-16 10:48:44 [INFO] === Step 5: Vector Store Population ===
2025-10-16 10:48:44 [INFO] Received 2 chunks for vector store population.
2025-10-16 10:48:44 [INFO] ✅ Chunk filtering complete: 2 valid chunks, 0 filtered out
2025-10-16 10:48:44 [INFO] Generating embeddings for 2 documents...
2025-10-16 10:48:45 [INFO] Attempting to upsert 2 points to Qdrant...
2025-10-16 10:48:45 [INFO] Qdrant collection 'RAG_Marketing' not found. Creating it...
2025-10-16 10:48:45 [INFO] Successfully created Qdrant collection: RAG_Marketing
2025-10-16 10:48:45 [ERROR] ❌ Vector store population failed: could not broadcast input array from shape (1536,) into shape (1024,)
Traceback (most recent call last):
  File "E:\Projects\Multi_Agent\lyzr_challenge\main.py", line 333, in populate_vector_store
    self.qdrant_client.upsert(
    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        collection_name=settings.QDRANT_COLLECTION_NAME,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        points=points,
        ^^^^^^^^^^^^^^
        wait=True  # Wait for the operation to complete
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\qdrant_client.py", line 1633, in upsert
    return self._client.upsert(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\qdrant_local.py", line 777, in upsert
    collection.upsert(points)
    ~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 2301, in upsert
    self._upsert_point(point)
    ~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 2293, in _upsert_point
    self._add_point(point)
    ~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 2201, in _add_point
    named_vectors[idx] = vector_np
    ~~~~~~~~~~~~~^^^^^
ValueError: could not broadcast input array from shape (1536,) into shape (1024,)
2025-10-16 10:52:38 [INFO] Generated retrieval plan: {'core_query': 'project certificate', 'tools': ['search_filter', 'search_vector'], 'filters': {'must': [{'key': 'metadata.certificate', 'match': {'value': True}}]}, 'reasoning': 'The user wants projects that have a certificate, which is a filter condition. A semantic query for "project certificate" combined with a filter on metadata.certificate is optimal.'}
2025-10-16 10:52:38 [INFO] FilterPlugin: Processing query...
2025-10-16 10:52:40 [ERROR] Error retrieving similar chunks via adapter: shapes (0,1024) and (1536,) not aligned: 1024 (dim 1) != 1536 (dim 0)
Traceback (most recent call last):
  File "E:\Projects\Multi_Agent\lyzr_challenge\query\vector_query.py", line 34, in retrieve_similar_chunks
    return self.adapter.retrieve_similar_chunks(query_embedding, top_k, filters)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Projects\Multi_Agent\lyzr_challenge\database_adapters\vector\qdrant_adapter.py", line 51, in retrieve_similar_chunks
    search_results = self.client.search(**search_params)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\qdrant_client.py", line 376, in search
    return self._client.search(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<12 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\qdrant_local.py", line 215, in search
    return collection.search(
           ~~~~~~~~~~~~~~~~~^
        query_vector=query_vector,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        score_threshold=score_threshold,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 588, in search
    scores = calculate_distance(query_vector, vectors, distance)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\distances.py", line 156, in calculate_distance
    return cosine_similarity(query, vectors)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\distances.py", line 98, in cosine_similarity
    return np.dot(vectors, query)
           ~~~~~~^^^^^^^^^^^^^^^^
ValueError: shapes (0,1024) and (1536,) not aligned: 1024 (dim 1) != 1536 (dim 0)
2025-10-16 10:52:41 [INFO] LLM extracted filters: {} and core query: 'project certificate'
2025-10-16 10:52:41 [INFO] Performing filtered vector search with core_query: 'project certificate' and filters: {}
2025-10-16 10:52:41 [ERROR] Error retrieving similar chunks via adapter: shapes (0,1024) and (1536,) not aligned: 1024 (dim 1) != 1536 (dim 0)
Traceback (most recent call last):
  File "E:\Projects\Multi_Agent\lyzr_challenge\query\vector_query.py", line 34, in retrieve_similar_chunks
    return self.adapter.retrieve_similar_chunks(query_embedding, top_k, filters)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Projects\Multi_Agent\lyzr_challenge\database_adapters\vector\qdrant_adapter.py", line 51, in retrieve_similar_chunks
    search_results = self.client.search(**search_params)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\qdrant_client.py", line 376, in search
    return self._client.search(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<12 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\qdrant_local.py", line 215, in search
    return collection.search(
           ~~~~~~~~~~~~~~~~~^
        query_vector=query_vector,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        score_threshold=score_threshold,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 588, in search
    scores = calculate_distance(query_vector, vectors, distance)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\distances.py", line 156, in calculate_distance
    return cosine_similarity(query, vectors)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\distances.py", line 98, in cosine_similarity
    return np.dot(vectors, query)
           ~~~~~~^^^^^^^^^^^^^^^^
ValueError: shapes (0,1024) and (1536,) not aligned: 1024 (dim 1) != 1536 (dim 0)
2025-10-16 10:52:41 [INFO] Fused 2 result lists into 1 documents using RRF.
2025-10-16 10:52:42 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
2025-10-16 10:53:23 [INFO] Generated retrieval plan: {'core_query': 'certificates', 'tools': ['search_vector'], 'filters': {}, 'reasoning': 'The user’s request is a broad, unfiltered query for certificates, so a simple vector search is appropriate to retrieve relevant information.'}
2025-10-16 10:53:24 [ERROR] Error retrieving similar chunks via adapter: shapes (0,1024) and (1536,) not aligned: 1024 (dim 1) != 1536 (dim 0)
Traceback (most recent call last):
  File "E:\Projects\Multi_Agent\lyzr_challenge\query\vector_query.py", line 34, in retrieve_similar_chunks
    return self.adapter.retrieve_similar_chunks(query_embedding, top_k, filters)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\Projects\Multi_Agent\lyzr_challenge\database_adapters\vector\qdrant_adapter.py", line 51, in retrieve_similar_chunks
    search_results = self.client.search(**search_params)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\qdrant_client.py", line 376, in search
    return self._client.search(
           ~~~~~~~~~~~~~~~~~~~^
        collection_name=collection_name,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<12 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\qdrant_local.py", line 215, in search
    return collection.search(
           ~~~~~~~~~~~~~~~~~^
        query_vector=query_vector,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        score_threshold=score_threshold,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\local_collection.py", line 588, in search
    scores = calculate_distance(query_vector, vectors, distance)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\distances.py", line 156, in calculate_distance
    return cosine_similarity(query, vectors)
  File "C:\Users\acer\AppData\Roaming\Python\Python313\site-packages\qdrant_client\local\distances.py", line 98, in cosine_similarity
    return np.dot(vectors, query)
           ~~~~~~^^^^^^^^^^^^^^^^
ValueError: shapes (0,1024) and (1536,) not aligned: 1024 (dim 1) != 1536 (dim 0)
2025-10-16 10:53:24 [INFO] Fused 1 result lists into 1 documents using RRF.
2025-10-16 10:53:24 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
2025-10-16 11:02:32 [INFO] Shutting down database connections...
2025-10-16 11:02:32 [INFO] Disconnected from Neo4j database
2025-10-16 11:20:16 [INFO] Logging system initialized
2025-10-16 11:20:16 [INFO] Initializing database connections...
2025-10-16 11:20:16 [INFO] Created neo4j graph adapter
2025-10-16 11:20:16 [INFO] Registered graph database adapter: neo4j
2025-10-16 11:20:16 [INFO] Set active graph adapter to: neo4j
2025-10-16 11:20:17 [INFO] Successfully connected to Neo4j database
2025-10-16 11:20:27 [WARNING] Could not connect to remote Qdrant: [WinError 10061] No connection could be made because the target machine actively refused it. Falling back to in-memory instance.
2025-10-16 11:20:27 [INFO] Created qdrant vector adapter
2025-10-16 11:20:27 [INFO] Successfully connected Qdrant adapter to global client.
2025-10-16 11:21:04 [INFO] Environment variables loaded successfully
2025-10-16 11:28:21 [INFO] PDF saved to: E:\Projects\Multi_Agent\lyzr_challenge\data\1760594300_Rohith_Resume.pdf
2025-10-16 11:28:21 [INFO] Environment variables loaded successfully
2025-10-16 11:28:21 [INFO] PDF Parser initialized with LlamaParse
2025-10-16 11:28:29 [INFO] 🚀 Starting Lyzr RAG Pipeline
2025-10-16 11:28:29 [INFO] === Step 1: PDF Parsing ===
2025-10-16 11:28:29 [INFO] Parsing PDF: E:\Projects\Multi_Agent\lyzr_challenge\data\1760594300_Rohith_Resume.pdf
2025-10-16 11:28:40 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
2025-10-16 11:28:40 [INFO] Successfully parsed PDF into 2 documents
2025-10-16 11:28:40 [WARNING] Failed to track pipeline step with Opik: 'function' object does not support the context manager protocol
2025-10-16 11:28:40 [INFO] Extracted 2 nodes from 2 documents
2025-10-16 11:28:40 [INFO] Sample node structure: ['id_', 'text', 'metadata', 'embedding']
2025-10-16 11:28:40 [INFO] ✅ PDF parsing complete: 2 documents, 2 nodes
2025-10-16 11:28:40 [INFO] === Step 2: Contextual Retrieval ===
2025-10-16 11:28:40 [INFO] Processing chunk 1/2
2025-10-16 11:28:42 [INFO] Completed chunk 1: Panchangam Rohith is a skilled computer science pr...
2025-10-16 11:28:49 [INFO] Processing chunk 2/2
2025-10-16 11:28:51 [INFO] Completed chunk 2: Rohith Panchangam has achieved notable success in ...
2025-10-16 11:28:58 [INFO] Successfully contextualized 2 chunks
2025-10-16 11:28:58 [INFO] Contextualized chunks saved to contextualized_chunks.json
2025-10-16 11:28:58 [INFO] ✅ Contextualization complete: 2 chunks
2025-10-16 11:28:58 [INFO] === Step 3: Knowledge Graph Extraction ===
2025-10-16 11:28:58 [INFO] Processing chunk 1/2
2025-10-16 11:29:21 [INFO] Successfully extracted data from chunk 1
2025-10-16 11:29:28 [INFO] Processing chunk 2/2
2025-10-16 11:29:36 [INFO] Successfully extracted data from chunk 2
2025-10-16 11:29:43 [INFO] Completed processing 2 chunks
2025-10-16 11:29:43 [INFO] Generating embeddings for vector similarity search (Qdrant)...
2025-10-16 11:29:44 [INFO] Generated embeddings for 13 entities and 11 relationships
2025-10-16 11:29:44 [INFO] Merged graph: 13 entities, 11 relationships
2025-10-16 11:29:44 [INFO] ✅ Knowledge graph complete: {'num_entities': 13, 'num_relationships': 11, 'entity_types': {'Person': 2, 'Project': 4, 'Education': 3, 'University': 1, 'Competition': 1, 'Internship': 1, 'Hackathon': 1}, 'relationship_types': {'PARTICIPATED_IN': 1, 'RECEIVED_CERTIFICATE_FROM': 1, 'DEVELOPED': 4, 'PARTICIPATED_IN_EVENT': 1, 'ATTENDED': 3, 'COMPLETED_INTERNSHIP': 1}, 'avg_degree': 1.6923076923076923, 'max_degree': 7, 'isolated_entities': 0}
2025-10-16 11:29:44 [INFO] === Step 4: Neo4j Population ===
2025-10-16 11:29:44 [INFO] Created unique constraint on Entity.name
2025-10-16 11:29:44 [INFO] Received notification from DBMS server: <GqlStatusObject gql_status='00NA0', status_description="note: successful completion - index or constraint already exists. The command 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' has no effect. The index or constraint specified by 'CONSTRAINT constraint_5adcbbfe FOR (e:Entity) REQUIRE (e.name) IS UNIQUE' already exists.", position=None, raw_classification='SCHEMA', classification=<NotificationClassification.SCHEMA: 'SCHEMA'>, raw_severity='INFORMATION', severity=<NotificationSeverity.INFORMATION: 'INFORMATION'>, diagnostic_record={'_classification': 'SCHEMA', '_severity': 'INFORMATION', 'OPERATION': '', 'OPERATION_CODE': '0', 'CURRENT_SCHEMA': '/'}> for query: 'CREATE CONSTRAINT IF NOT EXISTS FOR (e:Entity) REQUIRE e.name IS UNIQUE'
2025-10-16 11:29:44 [INFO] Adding 13 unique entities...
2025-10-16 11:29:45 [INFO] Adding 11 relationships...
2025-10-16 11:29:46 [INFO] Successfully populated Neo4j with knowledge graph
2025-10-16 11:29:46 [INFO] ✅ Neo4j population complete
2025-10-16 11:29:46 [INFO] === Step 5: Vector Store Population ===
2025-10-16 11:29:46 [INFO] Received 2 chunks for vector store population.
2025-10-16 11:29:46 [INFO] ✅ Chunk filtering complete: 2 valid chunks, 0 filtered out
2025-10-16 11:29:46 [INFO] Generating embeddings for 2 documents...
2025-10-16 11:29:46 [INFO] Attempting to upsert 2 points to Qdrant...
2025-10-16 11:29:46 [INFO] Qdrant collection 'RAG_Marketing' not found. Creating it...
2025-10-16 11:29:46 [INFO] Successfully created Qdrant collection: RAG_Marketing
2025-10-16 11:29:46 [INFO] ✅ Upsert operation completed for 2 points.
2025-10-16 11:29:47 [INFO] ✅ Verified: 2 vectors successfully stored in Qdrant!
2025-10-16 11:31:33 [INFO] Generated retrieval plan: {'core_query': 'projects', 'tools': ['search_vector'], 'filters': {'must': []}, 'reasoning': 'The user request is broad and contains no explicit filter conditions, so a simple semantic vector search for the term "projects" is sufficient.'}
2025-10-16 11:31:43 [INFO] Fused 1 result lists into 2 documents using RRF.
2025-10-16 11:31:44 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
2025-10-16 11:32:16 [INFO] Ontology loaded with 13 entities and 11 relationships
2025-10-16 11:32:55 [WARNING] Failed to track LLM call with Opik: 'function' object does not support the context manager protocol
